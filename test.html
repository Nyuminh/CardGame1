<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test GameCard API</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, select, textarea { width: 100%; padding: 8px; margin-bottom: 5px; }
        button { padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; }
        .result { margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Test GameCard API</h1>
    
    <form id="cardForm">
        <div class="form-group">
            <label for="_id">Card ID:</label>
            <input type="text" id="_id" name="_id" required>
        </div>
        
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        
        <div class="form-group">
            <label for="type">Type:</label>
            <select id="type" name="type" required>
                <option value="Ancient">Ancient</option>
                <option value="Elemental">Elemental</option>
                <option value="Beast">Beast</option>
                <option value="Spirit">Spirit</option>
                <option value="Hybrid">Hybrid</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="origin">Origin:</label>
            <input type="text" id="origin" name="origin" required>
        </div>
        
        <div class="form-group">
            <label for="dna_rate">DNA Rate (1-10):</label>
            <input type="number" id="dna_rate" name="dna_rate" min="1" max="10" required>
        </div>
        
        <div class="form-group">
            <label for="lore">Lore:</label>
            <textarea id="lore" name="lore" rows="3" required></textarea>
        </div>
        
        <div class="form-group">
            <label for="image">Image:</label>
            <input type="file" id="image" name="image" accept="image/*">
        </div>
        
        <h3>Icon (JSON Format)</h3>
        <div class="form-group">
            <label for="icon_ic1">IC1:</label>
            <input type="text" id="icon_ic1" placeholder="phá»ƒ" required>
        </div>
        <div class="form-group">
            <label for="icon_ic2">IC2:</label>
            <input type="text" id="icon_ic2" placeholder="be" required>
        </div>
        <div class="form-group">
            <label for="icon_ic3">IC3:</label>
            <input type="text" id="icon_ic3" placeholder="ngdo" required>
        </div>
        
        <h3>Stats</h3>
        <div class="form-group">
            <label for="attack">Attack:</label>
            <input type="number" id="attack" min="0" required>
        </div>
        <div class="form-group">
            <label for="defense">Defense:</label>
            <input type="number" id="defense" min="0" required>
        </div>
        <div class="form-group">
            <label for="mana">Mana:</label>
            <input type="number" id="mana" min="0" required>
        </div>
        
        <h3>Skills</h3>
        <div class="form-group">
            <label for="skill_name">Skill Name:</label>
            <input type="text" id="skill_name" required>
        </div>
        <div class="form-group">
            <label for="skill_description">Skill Description:</label>
            <textarea id="skill_description" rows="2" required></textarea>
        </div>
        
        <div class="form-group">
            <label for="token">JWT Token:</label>
            <input type="text" id="token" placeholder="Bearer token..." required>
        </div>
        
        <button type="submit">Create Card</button>
    </form>
    
    <div id="result" class="result" style="display: none;"></div>

    <script>
        document.getElementById('cardForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData();
            
            // Basic fields
            formData.append('_id', document.getElementById('_id').value);
            formData.append('name', document.getElementById('name').value);
            formData.append('type', document.getElementById('type').value);
            formData.append('origin', document.getElementById('origin').value);
            formData.append('dna_rate', document.getElementById('dna_rate').value);
            formData.append('lore', document.getElementById('lore').value);
            
            // Image file
            const imageFile = document.getElementById('image').files[0];
            if (imageFile) {
                formData.append('image', imageFile);
            }
            
            // Icon as JSON
            const icon = {
                ic1: document.getElementById('icon_ic1').value,
                ic2: document.getElementById('icon_ic2').value,
                ic3: document.getElementById('icon_ic3').value
            };
            formData.append('icon', JSON.stringify(icon));
            
            // Stats as JSON
            const stats = {
                attack: parseInt(document.getElementById('attack').value),
                defense: parseInt(document.getElementById('defense').value),
                mana: parseInt(document.getElementById('mana').value)
            };
            formData.append('stats', JSON.stringify(stats));
            
            // Skills as JSON array
            const skills = [{
                name: document.getElementById('skill_name').value,
                description: document.getElementById('skill_description').value
            }];
            formData.append('skills', JSON.stringify(skills));
            
            try {
                const response = await fetch('http://localhost:3000/api/cards', {
                    method: 'POST',
                    headers: {
                        'Authorization': document.getElementById('token').value
                    },
                    body: formData
                });
                
                const result = await response.json();
                
                document.getElementById('result').style.display = 'block';
                document.getElementById('result').innerHTML = `
                    <h3>Response:</h3>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
                
            } catch (error) {
                document.getElementById('result').style.display = 'block';
                document.getElementById('result').innerHTML = `
                    <h3>Error:</h3>
                    <pre>${error.message}</pre>
                `;
            }
        });
    </script>
</body>
</html>
